---
title: "STP ã®ç·´ç¿’"
emoji: "ğŸŒ²"
type: "tech"
topics: ["cisco", "ccna", "dynamips", "dynagen", "stp"]
published: true
---

#  æœ¬ã‚¨ãƒ³ãƒˆãƒªã«ã¤ã„ã¦

Dynagenã€Dynamips ã‚’ä½¿ã£ã¦ã€STP ã‚’ç·´ç¿’ã—ã¾ã™ã€‚
Dynagenã€Dynamips ã®åˆ©ç”¨ç’°å¢ƒã¯ã™ã§ã«æ•´ã£ã¦ã„ã‚‹ã‚‚ã®ã¨ã—ã¾ã™ã€‚

## ç’°å¢ƒã«ã¤ã„ã¦

sw01 ã¨ sw02 é–“ã§ã€trunk ãƒãƒ¼ãƒˆã«è¨­å®šã—ãŸ fa1/14ã€fa1/15 åŒå£«ã‚’çµç·šã—ã¦ã€STP ã®å‹•ä½œã‚’ç¢ºèªã—ã¾ã™ã€‚
fa1/15 é–“ã®çµç·šã¯å¾Œã»ã©å®Ÿæ–½ã—ã¾ã™ã€‚
```
[pc0] .1 (vlan10) fa1/0 [sw01] fa1/14 === fa1/14 [sw02] fa1/0 (vlan10) .2 pc2
[pc1] .2 (vlan11) fa1/4        fa1/15     fa1/15        fa1/4 (vlan11) .2 pc3
```

```:Dynagen è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«æŠœç²‹
    [[ROUTER sw02]]
        model = 3725
        slot1 = NM-16ESW
        f1/0 = NIO_udp:30000:127.0.0.1:20000
        f1/4 = NIO_udp:30002:127.0.0.1:20002
        f1/14 = sw01 f1/14
    [[ROUTER sw01]]
        model = 3725
        slot1 = NM-16ESW
        f1/0 = nio_tap:tap0
        f1/4 = NIO_udp:30001:127.0.0.1:20001
        f1/14 = sw02 f1/14
```

# åŸºæœ¬è¨­å®š

## sw01

sw01 ã§ VLAN10ã€VLAN11 ã‚’ä½œæˆã—ã¾ã™ã€‚
f1/14 ã‚’ trunk ãƒãƒ¼ãƒˆã«è¨­å®šã—ã¾ã™ã€‚
```
sw01#show int trunk

Port      Mode         Encapsulation  Status        Native vlan
Fa1/14    on           802.1q         trunking      1

Port      Vlans allowed on trunk
Fa1/14    1-4094

Port      Vlans allowed and active in management domain
Fa1/14    1,10-11

Port      Vlans in spanning tree forwarding state and not pruned
Fa1/14    1

sw01#show int status

Port    Name               Status       Vlan       Duplex Speed Type
Fa1/0                      connected    1          a-full   a-100 10/100BaseTX
Fa1/1                      notconnect   1            auto    auto 10/100BaseTX
Fa1/2                      notconnect   1            auto    auto 10/100BaseTX
Fa1/3                      notconnect   1            auto    auto 10/100BaseTX
Fa1/4                      connected    1          a-full   a-100 10/100BaseTX
Fa1/5                      notconnect   1            auto    auto 10/100BaseTX
Fa1/6                      notconnect   1            auto    auto 10/100BaseTX
Fa1/7                      notconnect   1            auto    auto 10/100BaseTX
Fa1/8                      notconnect   1            auto    auto 10/100BaseTX
Fa1/9                      notconnect   1            auto    auto 10/100BaseTX
Fa1/10                     notconnect   1            auto    auto 10/100BaseTX
Fa1/11                     notconnect   1            auto    auto 10/100BaseTX
Fa1/12                     notconnect   1            auto    auto 10/100BaseTX
Fa1/13                     notconnect   1            auto    auto 10/100BaseTX
Fa1/14                     connected    trunk      a-full   a-100 10/100BaseTX
Fa1/15                     notconnect   1            auto    auto 10/100BaseTX
```

STPã®çŠ¶æ…‹ã‚’ç¢ºèªã—ã¾ã™ã€‚
```
sw01#show spanning-tree summary
Root bridge for: VLAN1, VLAN10, VLAN11.
PortFast BPDU Guard is disabled
UplinkFast is disabled
BackboneFast is disabled

Name                 Blocking Listening Learning Forwarding STP Active
-------------------- -------- --------- -------- ---------- ----------
VLAN1                0        0         0        3          3
VLAN10               0        0         0        1          1
VLAN11               0        0         0        1          1
-------------------- -------- --------- -------- ---------- ----------
             3 VLANs 0        0         0        5          5
```

VLAN1ã€VLAN10ã€VLAN11 ã¨ã‚‚ sw01 ãŒ root ãƒ–ãƒªãƒƒã‚¸ã¨ãªã£ã¦ã„ã¾ã™ã€‚
```
sw01#show spanning-tree brief                                                                                                                                                                                                         [2/568]

VLAN1
  Spanning tree enabled protocol ieee
  Root ID    Priority    32768
             Address     c200.0347.0000
             This bridge is the root
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32768
             Address     c200.0347.0000
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time 300

Interface                                   Designated
Name                 Port ID Prio Cost  Sts Cost  Bridge ID            Port ID
-------------------- ------- ---- ----- --- ----- -------------------- -------
FastEthernet1/0      128.41   128    19 FWD     0 32768 c200.0347.0000 128.41
FastEthernet1/4      128.45   128    19 FWD     0 32768 c200.0347.0000 128.45
FastEthernet1/14     128.55   128    19 FWD     0 32768 c200.0347.0000 128.55


VLAN10
  Spanning tree enabled protocol ieee
  Root ID    Priority    32768
             Address     c200.0347.0001
             This bridge is the root
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32768
             Address     c200.0347.0001
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time 300

Interface                                   Designated
Name                 Port ID Prio Cost  Sts Cost  Bridge ID            Port ID
-------------------- ------- ---- ----- --- ----- -------------------- -------
FastEthernet1/14     128.55   128    19 FWD     0 32768 c200.0347.0001 128.55

VLAN11
  Spanning tree enabled protocol ieee
  Root ID    Priority    32768
             Address     c200.0347.0002
             This bridge is the root
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32768
             Address     c200.0347.0002
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time 300

Interface                                   Designated
Name                 Port ID Prio Cost  Sts Cost  Bridge ID            Port ID
-------------------- ------- ---- ----- --- ----- -------------------- -------
FastEthernet1/14     128.55   128    19 FWD     0 32768 c200.0347.0002 128.55

```

## sw02

sw02 ã§ã‚‚åŒæ§˜ã« VLAN10ã€VLAN11 ã‚’ä½œæˆã—ã€f1/14 ã‚’ trunk ãƒãƒ¼ãƒˆã«è¨­å®šã—ã¾ã™ã€‚
```
sw02#show int trunk

Port      Mode         Encapsulation  Status        Native vlan
Fa1/14    on           802.1q         trunking      1

Port      Vlans allowed on trunk
Fa1/14    1-4094

Port      Vlans allowed and active in management domain
Fa1/14    1,10-11

Port      Vlans in spanning tree forwarding state and not pruned
Fa1/14    1
sw02#
sw02#show int status

Port    Name               Status       Vlan       Duplex Speed Type
Fa1/0                      connected    1          a-full   a-100 10/100BaseTX
Fa1/1                      notconnect   1            auto    auto 10/100BaseTX
Fa1/2                      notconnect   1            auto    auto 10/100BaseTX
Fa1/3                      notconnect   1            auto    auto 10/100BaseTX
Fa1/4                      connected    1          a-full   a-100 10/100BaseTX
Fa1/5                      notconnect   1            auto    auto 10/100BaseTX
Fa1/6                      notconnect   1            auto    auto 10/100BaseTX
Fa1/7                      notconnect   1            auto    auto 10/100BaseTX
Fa1/8                      notconnect   1            auto    auto 10/100BaseTX
Fa1/9                      notconnect   1            auto    auto 10/100BaseTX
Fa1/10                     notconnect   1            auto    auto 10/100BaseTX
Fa1/11                     notconnect   1            auto    auto 10/100BaseTX
Fa1/12                     notconnect   1            auto    auto 10/100BaseTX
Fa1/13                     notconnect   1            auto    auto 10/100BaseTX
Fa1/14                     connected    trunk      a-full   a-100 10/100BaseTX
Fa1/15                     notconnect   1            auto    auto 10/100BaseTX
```

STPã®çŠ¶æ…‹ã‚’ç¢ºèªã—ã¾ã™ã€‚
```
sw02#show spanning-tree summary
Root bridge for: none.
PortFast BPDU Guard is disabled
UplinkFast is disabled
BackboneFast is disabled

Name                 Blocking Listening Learning Forwarding STP Active
-------------------- -------- --------- -------- ---------- ----------
VLAN1                0        0         0        3          3
VLAN10               0        0         0        1          1
VLAN11               0        0         0        1          1
-------------------- -------- --------- -------- ---------- ----------
             3 VLANs 0        0         0        5          5


```

VLAN1ã€VLAN10ã€VLAN11 ã¨ã‚‚ sw02 ã¯ root ãƒ–ãƒªãƒƒã‚¸ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
å†—é•·å›ç·šãŒãªã„ã®ã§ã€ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ã«ãªã£ã¦ã„ã‚‹ãƒãƒ¼ãƒˆã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
```
sw02#show spanning-tree brief                                                                                                                                                                                                         [4/586]

VLAN1
  Spanning tree enabled protocol ieee
  Root ID    Priority    32768
             Address     c200.0347.0000
             Cost        19
             Port        55 (FastEthernet1/14)
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32768
             Address     c201.0347.0000
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time 300

Interface                                   Designated
Name                 Port ID Prio Cost  Sts Cost  Bridge ID            Port ID
-------------------- ------- ---- ----- --- ----- -------------------- -------
FastEthernet1/0      128.41   128    19 FWD    19 32768 c201.0347.0000 128.41
FastEthernet1/4      128.45   128    19 FWD    19 32768 c201.0347.0000 128.45
FastEthernet1/14     128.55   128    19 FWD     0 32768 c200.0347.0000 128.55


VLAN10
  Spanning tree enabled protocol ieee
  Root ID    Priority    32768
             Address     c200.0347.0001
             Cost        19
             Port        55 (FastEthernet1/14)
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32768
             Address     c201.0347.0001
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time 300

Interface                                   Designated
Name                 Port ID Prio Cost  Sts Cost  Bridge ID            Port ID
-------------------- ------- ---- ----- --- ----- -------------------- -------
FastEthernet1/14     128.55   128    19 FWD     0 32768 c200.0347.0001 128.55


VLAN11
  Spanning tree enabled protocol ieee
  Root ID    Priority    32768
             Address     c200.0347.0002
             Cost        19
             Port        55 (FastEthernet1/14)
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32768
             Address     c201.0347.0002
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time 300

Interface                                   Designated
Name                 Port ID Prio Cost  Sts Cost  Bridge ID            Port ID
-------------------- ------- ---- ----- --- ----- -------------------- -------
FastEthernet1/14     128.55   128    19 FWD     0 32768 c200.0347.0002 128.55

```

# å†—é•·å›ç·šã®è¿½åŠ 

sw01ã€sw02 ã® fa1/15 ã§ trunk ãƒãƒ¼ãƒˆã®è¨­å®šã‚’ã—ã¾ã™ã€‚
è¨­å®šã—ãŸã‚‰ã€dynagen ã§ fa1/15 åŒå£«ã‚’çµç·šã—ã¾ã™ã€‚
```
=> conf
=>(config)hypervisor 127.0.0.1:7200
=>(config-127.0.0.1:7200)router sw01
=>(config-127.0.0.1:7200-router sw01)f1/15 = sw02 fa1/15
```

çµç·šå¾Œã®çŠ¶æ…‹ã‚’ç¢ºèªã—ã¾ã™ã€‚
```
sw01#show int trunk

Port      Mode         Encapsulation  Status        Native vlan
Fa1/14    on           802.1q         trunking      1
Fa1/15    on           802.1q         trunking      1

Port      Vlans allowed on trunk
Fa1/14    1-4094
Fa1/15    1-4094

Port      Vlans allowed and active in management domain
Fa1/14    1,10-11
Fa1/15    1,10-11

Port      Vlans in spanning tree forwarding state and not pruned
Fa1/14    1
Fa1/15    1

sw01#show int status

Port    Name               Status       Vlan       Duplex Speed Type
Fa1/0                      connected    1          a-full   a-100 10/100BaseTX
Fa1/1                      notconnect   1            auto    auto 10/100BaseTX
Fa1/2                      notconnect   1            auto    auto 10/100BaseTX
Fa1/3                      notconnect   1            auto    auto 10/100BaseTX
Fa1/4                      connected    1          a-full   a-100 10/100BaseTX
Fa1/5                      notconnect   1            auto    auto 10/100BaseTX
Fa1/6                      notconnect   1            auto    auto 10/100BaseTX
Fa1/7                      notconnect   1            auto    auto 10/100BaseTX
Fa1/8                      notconnect   1            auto    auto 10/100BaseTX
Fa1/9                      notconnect   1            auto    auto 10/100BaseTX
Fa1/10                     notconnect   1            auto    auto 10/100BaseTX
Fa1/11                     notconnect   1            auto    auto 10/100BaseTX
Fa1/12                     notconnect   1            auto    auto 10/100BaseTX
Fa1/13                     notconnect   1            auto    auto 10/100BaseTX
Fa1/14                     connected    trunk      a-full   a-100 10/100BaseTX
Fa1/15                     connected    trunk      a-full   a-100 10/100BaseTX
```

STPã®çŠ¶æ…‹ã‚’ç¢ºèªã—ã¾ã™ã€‚
```
sw01#show spanning-tree summary
Root bridge for: VLAN1, VLAN10, VLAN11.
PortFast BPDU Guard is disabled
UplinkFast is disabled
BackboneFast is disabled

Name                 Blocking Listening Learning Forwarding STP Active
-------------------- -------- --------- -------- ---------- ----------
VLAN1                0        0         0        4          4
VLAN10               0        0         0        2          2
VLAN11               0        0         0        2          2
-------------------- -------- --------- -------- ---------- ----------
             3 VLANs 0        0         0        8          8

sw01#show spanning-tree brief

VLAN1
  Spanning tree enabled protocol ieee
  Root ID    Priority    32768
             Address     c200.0347.0000
             This bridge is the root
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32768
             Address     c200.0347.0000
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time 300

Interface                                   Designated
Name                 Port ID Prio Cost  Sts Cost  Bridge ID            Port ID
-------------------- ------- ---- ----- --- ----- -------------------- -------
FastEthernet1/0      128.41   128    19 FWD     0 32768 c200.0347.0000 128.41
FastEthernet1/4      128.45   128    19 FWD     0 32768 c200.0347.0000 128.45
FastEthernet1/14     128.55   128    19 FWD     0 32768 c200.0347.0000 128.55
FastEthernet1/15     128.56   128    19 FWD     0 32768 c200.0347.0000 128.56


VLAN10
  Spanning tree enabled protocol ieee
  Root ID    Priority    32768
             Address     c200.0347.0001
             This bridge is the root
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32768
             Address     c200.0347.0001
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time 300

Interface                                   Designated
Name                 Port ID Prio Cost  Sts Cost  Bridge ID            Port ID
-------------------- ------- ---- ----- --- ----- -------------------- -------
FastEthernet1/14     128.55   128    19 FWD     0 32768 c200.0347.0001 128.55
FastEthernet1/15     128.56   128    19 FWD     0 32768 c200.0347.0001 128.56


VLAN11
  Spanning tree enabled protocol ieee
  Root ID    Priority    32768
             Address     c200.0347.0002
             This bridge is the root
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32768
             Address     c200.0347.0002
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time 300

Interface                                   Designated
Name                 Port ID Prio Cost  Sts Cost  Bridge ID            Port ID
-------------------- ------- ---- ----- --- ----- -------------------- -------
FastEthernet1/14     128.55   128    19 FWD     0 32768 c200.0347.0002 128.55
FastEthernet1/15     128.56   128    19 FWD     0 32768 c200.0347.0002 128.56

```

sw02ã§ã‚‚åŒæ§˜ã«ç¢ºèªã—ã¾ã™ã€‚
```
sw02#show int trunk

Port      Mode         Encapsulation  Status        Native vlan
Fa1/14    on           802.1q         trunking      1
Fa1/15    on           802.1q         trunking      1

Port      Vlans allowed on trunk
Fa1/14    1-4094
Fa1/15    1-4094

Port      Vlans allowed and active in management domain
Fa1/14    1,10-11
Fa1/15    1,10-11

Port      Vlans in spanning tree forwarding state and not pruned
Fa1/14    1
Fa1/15    none

sw02#show int status

Port    Name               Status       Vlan       Duplex Speed Type
Fa1/0                      connected    1          a-full   a-100 10/100BaseTX
Fa1/1                      notconnect   1            auto    auto 10/100BaseTX
Fa1/2                      notconnect   1            auto    auto 10/100BaseTX
Fa1/3                      notconnect   1            auto    auto 10/100BaseTX
Fa1/4                      connected    1          a-full   a-100 10/100BaseTX
Fa1/5                      notconnect   1            auto    auto 10/100BaseTX
Fa1/6                      notconnect   1            auto    auto 10/100BaseTX
Fa1/7                      notconnect   1            auto    auto 10/100BaseTX
Fa1/8                      notconnect   1            auto    auto 10/100BaseTX
Fa1/9                      notconnect   1            auto    auto 10/100BaseTX
Fa1/10                     notconnect   1            auto    auto 10/100BaseTX
Fa1/11                     notconnect   1            auto    auto 10/100BaseTX
Fa1/12                     notconnect   1            auto    auto 10/100BaseTX
Fa1/13                     notconnect   1            auto    auto 10/100BaseTX
Fa1/14                     connected    trunk      a-full   a-100 10/100BaseTX
Fa1/15                     connected    trunk      a-full   a-100 10/100BaseTX
```

STPã®çŠ¶æ…‹ã‚’ç¢ºèªã—ã¾ã™ã€‚
```
sw02#show spanning-tree summary
Root bridge for: none.
PortFast BPDU Guard is disabled
UplinkFast is disabled
BackboneFast is disabled

Name                 Blocking Listening Learning Forwarding STP Active
-------------------- -------- --------- -------- ---------- ----------
VLAN1                1        0         0        3          4
VLAN10               1        0         0        1          2
VLAN11               1        0         0        1          2
-------------------- -------- --------- -------- ---------- ----------
             3 VLANs 3        0         0        5          8


```

3ã¤ã®VLANã¨ã‚‚ fa1/15 ãŒãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ãƒãƒ¼ãƒˆã¨ãªã£ã¦ã„ã¾ã™ã€‚
```
sw02#show spanning-tree brief

VLAN1
  Spanning tree enabled protocol ieee
  Root ID    Priority    32768
             Address     c200.0347.0000
             Cost        19
             Port        55 (FastEthernet1/14)
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32768
             Address     c201.0347.0000
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time 300

Interface                                   Designated
Name                 Port ID Prio Cost  Sts Cost  Bridge ID            Port ID
-------------------- ------- ---- ----- --- ----- -------------------- -------
FastEthernet1/0      128.41   128    19 FWD    19 32768 c201.0347.0000 128.41
FastEthernet1/4      128.45   128    19 FWD    19 32768 c201.0347.0000 128.45
FastEthernet1/14     128.55   128    19 FWD     0 32768 c200.0347.0000 128.55
FastEthernet1/15     128.56   128    19 BLK     0 32768 c200.0347.0000 128.56


VLAN10
  Spanning tree enabled protocol ieee
  Root ID    Priority    32768
             Address     c200.0347.0001
             Cost        19
             Port        55 (FastEthernet1/14)
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32768
             Address     c201.0347.0001
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time 300

Interface                                   Designated
Name                 Port ID Prio Cost  Sts Cost  Bridge ID            Port ID
-------------------- ------- ---- ----- --- ----- -------------------- -------
FastEthernet1/14     128.55   128    19 FWD     0 32768 c200.0347.0001 128.55
FastEthernet1/15     128.56   128    19 BLK     0 32768 c200.0347.0001 128.56


VLAN11
  Spanning tree enabled protocol ieee
  Root ID    Priority    32768
             Address     c200.0347.0002
             Cost        19
             Port        55 (FastEthernet1/14)
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32768
             Address     c201.0347.0002
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time 300

Interface                                   Designated
Name                 Port ID Prio Cost  Sts Cost  Bridge ID            Port ID
-------------------- ------- ---- ----- --- ----- -------------------- -------
FastEthernet1/14     128.55   128    19 FWD     0 32768 c200.0347.0002 128.55
FastEthernet1/15     128.56   128    19 BLK     0 32768 c200.0347.0002 128.56

```

# ãƒ–ãƒªãƒƒã‚¸ã®ãƒ—ãƒ©ã‚¤ã‚ªãƒªãƒ†ã‚£ã‚’å¤‰æ›´ã™ã‚‹ã€‚

ãƒ«ãƒ¼ãƒˆãƒ–ãƒªãƒƒã‚¸ã®é¸å‡ºã«ãŠã„ã¦ã¯ãƒ–ãƒªãƒƒã‚¸IDã‚’æ¯”è¼ƒã—ã¦ã€å€¤ã®å°ã•ã„ã‚¹ã‚¤ãƒƒãƒãŒãƒ«ãƒ¼ãƒˆãƒ–ãƒªãƒƒã‚¸ã«é¸å‡ºã•ã‚Œã¾ã™ã€‚
ãƒ–ãƒªãƒƒã‚¸IDã¯ã€ãƒ–ãƒªãƒƒã‚¸ãƒ—ãƒ©ã‚¤ã‚ªãƒªãƒ†ã‚£ + MACã‚¢ãƒ‰ãƒ¬ã‚¹ã§è¡¨ã•ã‚Œã¾ã™ã€‚
ãƒ–ãƒªãƒƒã‚¸ãƒ—ãƒ©ã‚¤ã‚ªãƒªãƒ†ã‚£ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã§ã€ãƒ«ãƒ¼ãƒˆãƒ–ãƒªãƒƒã‚¸ã®é¸å‡ºã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## sw02

sw02 ã§ vlan11 ã® ãƒ–ãƒªãƒƒã‚¸ãƒ—ãƒ©ã‚¤ã‚ªãƒªãƒ†ã‚£ã‚’å¤‰æ›´ã—ã¦ã¿ã¾ã™ã€‚
```
sw02(config)#spanning-tree vlan 11 root primary
```

çŠ¶æ…‹ã‚’ç¢ºèªã—ã¾ã™ã€‚
```
sw02#show spanning-tree summary
Root bridge for: VLAN11.
PortFast BPDU Guard is disabled
UplinkFast is disabled
BackboneFast is disabled

Name                 Blocking Listening Learning Forwarding STP Active
-------------------- -------- --------- -------- ---------- ----------
VLAN1                1        0         0        3          4
VLAN10               1        0         0        1          2
VLAN11               0        0         0        2          2
-------------------- -------- --------- -------- ---------- ----------
             3 VLANs 2        0         0        6          8

```

VLAN11ã®ã¿ã€ã“ã¡ã‚‰ãŒãƒ«ãƒ¼ãƒˆãƒ–ãƒªãƒƒã‚¸ã«ãªã‚Šã¾ã—ãŸã€‚
VLAN1ã€VLAN10 ã® fa1/15 ãŒãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ã¨ãªã£ã¦ã„ã¾ã™ã€‚
```
sw02#show spanning-tree brief

VLAN1
  Spanning tree enabled protocol ieee
  Root ID    Priority    32768
             Address     c200.0347.0000
             Cost        19
             Port        55 (FastEthernet1/14)
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32768
             Address     c201.0347.0000
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time 300

Interface                                   Designated
Name                 Port ID Prio Cost  Sts Cost  Bridge ID            Port ID
-------------------- ------- ---- ----- --- ----- -------------------- -------
FastEthernet1/0      128.41   128    19 FWD    19 32768 c201.0347.0000 128.41
FastEthernet1/4      128.45   128    19 FWD    19 32768 c201.0347.0000 128.45
FastEthernet1/14     128.55   128    19 FWD     0 32768 c200.0347.0000 128.55
FastEthernet1/15     128.56   128    19 BLK     0 32768 c200.0347.0000 128.56


VLAN10
  Spanning tree enabled protocol ieee
  Root ID    Priority    32768
             Address     c200.0347.0001
             Cost        19
             Port        55 (FastEthernet1/14)
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32768
             Address     c201.0347.0001
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time 300

Interface                                   Designated
Name                 Port ID Prio Cost  Sts Cost  Bridge ID            Port ID
-------------------- ------- ---- ----- --- ----- -------------------- -------
FastEthernet1/14     128.55   128    19 FWD     0 32768 c200.0347.0001 128.55
FastEthernet1/15     128.56   128    19 BLK     0 32768 c200.0347.0001 128.56


VLAN11
  Spanning tree enabled protocol ieee
  Root ID    Priority    8192
             Address     c201.0347.0002
             This bridge is the root
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    8192
             Address     c201.0347.0002
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time 300

Interface                                   Designated
Name                 Port ID Prio Cost  Sts Cost  Bridge ID            Port ID
-------------------- ------- ---- ----- --- ----- -------------------- -------
FastEthernet1/14     128.55   128    19 FWD     0  8192 c201.0347.0002 128.55
FastEthernet1/15     128.56   128    19 FWD     0  8192 c201.0347.0002 128.56

```

sw01 ã§ã‚‚ç¢ºèªã—ã¾ã™ã€‚
```
sw01#show spanning-tree summary
Root bridge for: VLAN1, VLAN10.
PortFast BPDU Guard is disabled
UplinkFast is disabled
BackboneFast is disabled

Name                 Blocking Listening Learning Forwarding STP Active
-------------------- -------- --------- -------- ---------- ----------
VLAN1                0        0         0        4          4
VLAN10               0        0         0        2          2
VLAN11               1        0         0        1          2
-------------------- -------- --------- -------- ---------- ----------
             3 VLANs 1        0         0        7          8

```

VLAN1ã€VLAN10ã¨ã‚‚ã€å¼•ãç¶šãã“ã¡ã‚‰ãŒãƒ«ãƒ¼ãƒˆãƒ–ãƒªãƒƒã‚¸ã§ã™ã€‚
VLAN11 ã® fa1/15 ãŒãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ã¨ãªã£ã¦ã„ã¾ã™ã€‚
```
sw01#show spanning-tree brief

VLAN1
  Spanning tree enabled protocol ieee
  Root ID    Priority    32768
             Address     c200.0347.0000
             This bridge is the root
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32768
             Address     c200.0347.0000
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time 300

Interface                                   Designated
Name                 Port ID Prio Cost  Sts Cost  Bridge ID            Port ID
-------------------- ------- ---- ----- --- ----- -------------------- -------
FastEthernet1/0      128.41   128    19 FWD     0 32768 c200.0347.0000 128.41
FastEthernet1/4      128.45   128    19 FWD     0 32768 c200.0347.0000 128.45
FastEthernet1/14     128.55   128    19 FWD     0 32768 c200.0347.0000 128.55
FastEthernet1/15     128.56   128    19 FWD     0 32768 c200.0347.0000 128.56


VLAN10
  Spanning tree enabled protocol ieee
  Root ID    Priority    32768
             Address     c200.0347.0001
             This bridge is the root
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32768
             Address     c200.0347.0001
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time 300

Interface                                   Designated
Name                 Port ID Prio Cost  Sts Cost  Bridge ID            Port ID
-------------------- ------- ---- ----- --- ----- -------------------- -------
FastEthernet1/14     128.55   128    19 FWD     0 32768 c200.0347.0001 128.55
FastEthernet1/15     128.56   128    19 FWD     0 32768 c200.0347.0001 128.56


VLAN11
  Spanning tree enabled protocol ieee
  Root ID    Priority    8192
             Address     c201.0347.0002
             Cost        19
             Port        55 (FastEthernet1/14)
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32768
             Address     c200.0347.0002
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time 300

Interface                                   Designated
Name                 Port ID Prio Cost  Sts Cost  Bridge ID            Port ID
-------------------- ------- ---- ----- --- ----- -------------------- -------
FastEthernet1/14     128.55   128    19 FWD     0  8192 c201.0347.0002 128.55
FastEthernet1/15     128.56   128    19 BLK     0  8192 c201.0347.0002 128.56

```

ãƒ«ãƒ¼ãƒˆãƒ–ãƒªãƒƒã‚¸ãŒå¤‰ã‚ã£ãŸã ã‘ã§ã¯ã€ãƒãƒ¼ãƒˆã®è² è·åˆ†æ•£ã®å½¹ã«ã¯ãŸã¡ã¾ã›ã‚“ã€‚
ç¢ºèªã—ãŸã‚‰è¨­å®šã‚’æˆ»ã—ã¾ã™ã€‚
```
sw02#conf t
sw02(config)#no spanning-tree vlan 11 root primary
```

# ãƒãƒ¼ãƒˆã‚³ã‚¹ãƒˆã®å¤‰æ›´

ãƒ«ãƒ¼ãƒˆãƒãƒ¼ãƒˆã®é¸å‡ºã«ãŠã„ã¦ã¯ã€é€ä¿¡ã•ã‚Œã¦ãã‚‹BPDUã®ãƒ«ãƒ¼ãƒˆãƒ‘ã‚¹ã‚³ã‚¹ãƒˆã€é€ä¿¡å…ƒãƒ–ãƒªãƒƒã‚¸IDã€é€ä¿¡å…ƒãƒãƒ¼ãƒˆID ã®é †ã§æ¯”è¼ƒã—ã€å°ã•ã„å€¤ã®ãƒãƒ¼ãƒˆãŒãƒ«ãƒ¼ãƒˆãƒãƒ¼ãƒˆã«ãªã‚Šã¾ã™ã€‚
ãƒãƒ¼ãƒˆã‚³ã‚¹ãƒˆã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã§ã€ãƒ«ãƒ¼ãƒˆãƒãƒ¼ãƒˆã®é¸å‡ºã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## sw02

sw02 ã§ vlan11 ã® fa1/14 ã®ãƒãƒ¼ãƒˆã‚³ã‚¹ãƒˆã‚’æ‚ªåŒ–ã•ã›ã¾ã™ã€‚

```
sw02(config)#int fa1/14
sw02(config-if)#spanning-tree vlan 11 cost 20
```

çŠ¶æ…‹ã‚’ç¢ºèªã—ã¾ã™ã€‚
VLAN11ã® fa1/14 ãŒ ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ã«ã€fa1/15 ãŒãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã«å¤‰åŒ–ã—ã¾ã—ãŸã€‚
```
sw02#show spanning-tree brief                                                                                                                                                                                                        [8/1510]

VLAN1
  Spanning tree enabled protocol ieee
  Root ID    Priority    32768
             Address     c200.0347.0000
             Cost        19
             Port        55 (FastEthernet1/14)
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32768
             Address     c201.0347.0000
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time 300

Interface                                   Designated
Name                 Port ID Prio Cost  Sts Cost  Bridge ID            Port ID
-------------------- ------- ---- ----- --- ----- -------------------- -------
FastEthernet1/0      128.41   128    19 FWD    19 32768 c201.0347.0000 128.41
FastEthernet1/4      128.45   128    19 FWD    19 32768 c201.0347.0000 128.45
FastEthernet1/14     128.55   128    19 FWD     0 32768 c200.0347.0000 128.55
FastEthernet1/15     128.56   128    19 BLK     0 32768 c200.0347.0000 128.56


VLAN10
  Spanning tree enabled protocol ieee
  Root ID    Priority    32768
             Address     c200.0347.0001
             Cost        19
             Port        55 (FastEthernet1/14)
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32768
             Address     c201.0347.0001
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time 300

Interface                                   Designated
Name                 Port ID Prio Cost  Sts Cost  Bridge ID            Port ID
-------------------- ------- ---- ----- --- ----- -------------------- -------
FastEthernet1/14     128.55   128    19 FWD     0 32768 c200.0347.0001 128.55
FastEthernet1/15     128.56   128    19 BLK     0 32768 c200.0347.0001 128.56


VLAN11
  Spanning tree enabled protocol ieee
  Root ID    Priority    32768
             Address     c200.0347.0002
             Cost        19
             Port        56 (FastEthernet1/15)
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32768
             Address     c201.0347.0002
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time 300

Interface                                   Designated
Name                 Port ID Prio Cost  Sts Cost  Bridge ID            Port ID
-------------------- ------- ---- ----- --- ----- -------------------- -------
FastEthernet1/14     128.55   128    20 BLK     0 32768 c200.0347.0002 128.55
FastEthernet1/15     128.56   128    19 FWD     0 32768 c200.0347.0002 128.56


```

## sw01

sw01 ã§ã‚‚ç¢ºèªã—ã¾ã™ã€‚
ã“ã¡ã‚‰ã§ã¯ãƒãƒ¼ãƒˆã®å½¹å‰²ã®å¤‰æ›´ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
```
sw01#show spanning-tree brief

VLAN1
  Spanning tree enabled protocol ieee
  Root ID    Priority    32768
             Address     c200.0347.0000
             This bridge is the root
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32768
             Address     c200.0347.0000
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time 300

Interface                                   Designated
Name                 Port ID Prio Cost  Sts Cost  Bridge ID            Port ID
-------------------- ------- ---- ----- --- ----- -------------------- -------
FastEthernet1/0      128.41   128    19 FWD     0 32768 c200.0347.0000 128.41
FastEthernet1/4      128.45   128    19 FWD     0 32768 c200.0347.0000 128.45
FastEthernet1/14     128.55   128    19 FWD     0 32768 c200.0347.0000 128.55
FastEthernet1/15     128.56   128    19 FWD     0 32768 c200.0347.0000 128.56


VLAN10
  Spanning tree enabled protocol ieee
  Root ID    Priority    32768
             Address     c200.0347.0001
             This bridge is the root
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32768
             Address     c200.0347.0001
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time 300

Interface                                   Designated
Name                 Port ID Prio Cost  Sts Cost  Bridge ID            Port ID
-------------------- ------- ---- ----- --- ----- -------------------- -------
FastEthernet1/14     128.55   128    19 FWD     0 32768 c200.0347.0001 128.55
FastEthernet1/15     128.56   128    19 FWD     0 32768 c200.0347.0001 128.56


VLAN11
  Spanning tree enabled protocol ieee
  Root ID    Priority    32768
             Address     c200.0347.0002
             This bridge is the root
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32768
             Address     c200.0347.0002
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time 300

Interface                                   Designated
Name                 Port ID Prio Cost  Sts Cost  Bridge ID            Port ID
-------------------- ------- ---- ----- --- ----- -------------------- -------
FastEthernet1/14     128.55   128    19 FWD     0 32768 c200.0347.0002 128.55
FastEthernet1/15     128.56   128    19 FWD     0 32768 c200.0347.0002 128.56

```

è¨­å®šã‚’å…ƒã«æˆ»ã—ã¾ã™ã€‚
```
sw02(config)#int fa1/14
sw02(config-if)#no spanning-tree vlan 11 cost 20
```

# ãƒãƒ¼ãƒˆãƒ—ãƒ©ã‚¤ã‚ªãƒªãƒ†ã‚£ã®å¤‰æ›´

é€ä¿¡å…ƒãƒãƒ¼ãƒˆIDã¯ã€ãƒãƒ¼ãƒˆãƒ—ãƒ©ã‚¤ã‚ªãƒªãƒ†ã‚£ + ãƒãƒ¼ãƒˆç•ªå·ã§è¡¨ã•ã‚Œã¾ã™ã€‚
ãƒãƒ¼ãƒˆãƒ—ãƒ©ã‚¤ã‚ªãƒªãƒ†ã‚£ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã‚‚ã€ãƒ«ãƒ¼ãƒˆãƒãƒ¼ãƒˆã®é¸å‡ºã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## sw01

sw01 ã§ vlan11 ã® fa1/14 ã®ãƒãƒ¼ãƒˆãƒ—ãƒ©ã‚¤ã‚ªãƒªãƒ†ã‚£ã‚’å¤‰æ›´ã—ã¦ã€å„ªå…ˆåº¦ã‚’ä¸‹ã’ã¦ã¿ã¾ã™ã€‚
```
sw01(config-if)#int fa1/14
sw01(config-if)#spanning-tree vlan 11 port-priority 144
```

çŠ¶æ…‹ã‚’ç¢ºèªã—ã¾ã™ã€‚
ã“ã¡ã‚‰ã§ã¯ãƒãƒ¼ãƒˆã®å½¹å‰²ã®å¤‰æ›´ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
```
sw01#show spanning-tree brief

VLAN1
  Spanning tree enabled protocol ieee
  Root ID    Priority    32768
             Address     c200.0347.0000
             This bridge is the root
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32768
             Address     c200.0347.0000
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time 300

Interface                                   Designated
Name                 Port ID Prio Cost  Sts Cost  Bridge ID            Port ID
-------------------- ------- ---- ----- --- ----- -------------------- -------
FastEthernet1/0      128.41   128    19 FWD     0 32768 c200.0347.0000 128.41
FastEthernet1/4      128.45   128    19 FWD     0 32768 c200.0347.0000 128.45
FastEthernet1/14     128.55   128    19 FWD     0 32768 c200.0347.0000 128.55
FastEthernet1/15     128.56   128    19 FWD     0 32768 c200.0347.0000 128.56


VLAN10
  Spanning tree enabled protocol ieee
  Root ID    Priority    32768
             Address     c200.0347.0001
             This bridge is the root
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32768
             Address     c200.0347.0001
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time 300

Interface                                   Designated
Name                 Port ID Prio Cost  Sts Cost  Bridge ID            Port ID
-------------------- ------- ---- ----- --- ----- -------------------- -------
FastEthernet1/14     128.55   128    19 FWD     0 32768 c200.0347.0001 128.55
FastEthernet1/15     128.56   128    19 FWD     0 32768 c200.0347.0001 128.56


VLAN11
  Spanning tree enabled protocol ieee
  Root ID    Priority    32768
             Address     c200.0347.0002
             This bridge is the root
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32768
             Address     c200.0347.0002
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time 300

Interface                                   Designated
Name                 Port ID Prio Cost  Sts Cost  Bridge ID            Port ID
-------------------- ------- ---- ----- --- ----- -------------------- -------
FastEthernet1/14     144.55   144    19 FWD     0 32768 c200.0347.0002 144.55
FastEthernet1/15     128.56   128    19 FWD     0 32768 c200.0347.0002 128.56


```

sw02 ã§ã‚‚ç¢ºèªã—ã¾ã™ã€‚
ã“ã®å ´åˆã§ã‚‚ã€VLAN11ã® fa1/14 ãŒ ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ã«ã€fa1/15 ãŒãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã«å¤‰åŒ–ã—ã¾ã—ãŸã€‚
```
sw02#show spanning-tree brief

VLAN1
  Spanning tree enabled protocol ieee
  Root ID    Priority    32768
             Address     c200.0347.0000
             Cost        19
             Port        55 (FastEthernet1/14)
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32768
             Address     c201.0347.0000
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time 300

Interface                                   Designated
Name                 Port ID Prio Cost  Sts Cost  Bridge ID            Port ID
-------------------- ------- ---- ----- --- ----- -------------------- -------
FastEthernet1/0      128.41   128    19 FWD    19 32768 c201.0347.0000 128.41
FastEthernet1/4      128.45   128    19 FWD    19 32768 c201.0347.0000 128.45
FastEthernet1/14     128.55   128    19 FWD     0 32768 c200.0347.0000 128.55
FastEthernet1/15     128.56   128    19 BLK     0 32768 c200.0347.0000 128.56


VLAN10
  Spanning tree enabled protocol ieee
  Root ID    Priority    32768
             Address     c200.0347.0001
             Cost        19
             Port        55 (FastEthernet1/14)
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32768
             Address     c201.0347.0001
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time 300

Interface                                   Designated
Name                 Port ID Prio Cost  Sts Cost  Bridge ID            Port ID
-------------------- ------- ---- ----- --- ----- -------------------- -------
FastEthernet1/14     128.55   128    19 FWD     0 32768 c200.0347.0001 128.55
FastEthernet1/15     128.56   128    19 BLK     0 32768 c200.0347.0001 128.56


VLAN11
  Spanning tree enabled protocol ieee
  Root ID    Priority    32768
             Address     c200.0347.0002
             Cost        19
             Port        56 (FastEthernet1/15)
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32768
             Address     c201.0347.0002
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time 300

Interface                                   Designated
Name                 Port ID Prio Cost  Sts Cost  Bridge ID            Port ID
-------------------- ------- ---- ----- --- ----- -------------------- -------
FastEthernet1/14     128.55   128    19 BLK     0 32768 c200.0347.0002 144.55
FastEthernet1/15     128.56   128    19 FWD     0 32768 c200.0347.0002 128.56

```

ç¢ºèªã—ãŸã‚‰è¨­å®šã‚’æˆ»ã—ã¾ã™ã€‚
```
sw01(config-if)#int fa1/14
sw01(config-if)#no spanning-tree vlan 11 port-priority 144
```


# ã‚³ãƒ³ãƒãƒ¼ã‚¸ã‚§ãƒ³ã‚¹é«˜é€ŸåŒ–æŠ€è¡“

https://www.infraexpert.com/study/stpz7.html

## portfast

å³æ™‚åæŸã•ã‚Œã‚‹ã€‚å¼•ãç¶šãBPDUã¯é€ä¿¡ã•ã‚Œã‚‹ã€‚
ãƒ–ãƒªãƒƒã‚¸ãŒæ¥ç¶šã•ã‚Œãªã„ãƒãƒ¼ãƒˆ(PCç­‰ã®ç«¯æœ«ãŒæ¥ç¶šã•ã‚Œã‚‹ãƒãƒ¼ãƒˆ)ã§è¨­å®š
```

(config-if)# spanning-tree portfast
```

## uplinkfast

ãƒ«ãƒ¼ãƒˆãƒãƒ¼ãƒˆã«ãƒªãƒ³ã‚¯éšœå®³ãŒã‚ã£ãŸã¨ãã«ã€ãƒ«ãƒ¼ãƒˆãƒãƒ¼ãƒˆã®å½¹å‰²ã‚’5ç§’ä»¥å†…ã«éæŒ‡å®šãƒãƒ¼ãƒˆã«å¼•ãç¶™ãŒã›ã‚‹ã€‚
root, secondary root ã§ã¯ãªã„ã‚¹ã‚¤ãƒƒãƒã§è¨­å®š
```
(config)# spanning-tree uplinkfast
```

## backbonefast

é–“æ¥ãƒªãƒ³ã‚¯ã«éšœå®³ãŒã‚ã£ãŸã¨ãã®ã‚³ãƒ³ãƒãƒ¼ã‚¸ã‚§ãƒ³ã‚¹æ™‚é–“(50ç§’:20âº20âº15)ã‚’20ç§’çŸ­ç¸®ã™ã‚‹ã€‚
æœ€å¤§ã‚¨ãƒ¼ã‚¸å¾…ãŸãšã«ã€éæŒ‡å®šãƒãƒ¼ãƒˆã‚’ãƒªã‚¹ãƒ‹ãƒ³ã‚°çŠ¶æ…‹ã¸ç§»è¡Œã€‚
å…¨ã¦ã®ã‚¹ã‚¤ãƒƒãƒã§è¨­å®š
```
(config)# spanning-tree backbonefast
```

# ã¾ã¨ã‚

Dynagenã€Dynamips ã‚’ä½¿ã£ã¦ã€STP ã®ã€ãƒ«ãƒ¼ãƒˆãƒ–ãƒªãƒƒã‚¸ã€ãƒ«ãƒ¼ãƒˆãƒãƒ¼ãƒˆã®å¤‰æ›´ã‚’ç·´ç¿’ã—ã¾ã—ãŸã€‚
STPã§ã¯ã€è‡ªåˆ†ã§ãƒ«ãƒ¼ãƒˆãƒ–ãƒªãƒƒã‚¸ã‚„ã€ãƒ«ãƒ¼ãƒˆãƒãƒ¼ãƒˆã€ã‚ã‚‹ã„ã¯éæŒ‡å®šãƒãƒ¼ãƒˆã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã§ãã¾ã™ã€‚
dynamips ã§å¯¾å¿œã—ã¦ã„ã‚‹ã®ã¯ åŸºæœ¬çš„ãª STP ã®ã¿ã§ã€RSTPç­‰ã«ã¯å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚ã“ã‚Œã‚‰ã®æ¤œè¨¼ã«ã¯ä»–ã®æ‰‹æ®µãŒå¿…è¦ã¨ãªã£ã¦ãã¾ã™ã€‚
